# this should propose for each waypoint adjacent to the current waypoint
sp {simple-robot-with-map*propose*choose-next-waypoint
   (state <s> ^name wander
              ^waypoints.at <w>
             -^superoperator.destination)
   (<w> ^next <wn>)
-->
   (<s> ^operator <op> + >)
   (<op> ^name choose-next-waypoint
         ^destination <wn>)
}

sp {wander*compare*choose-next-waypoint
   (state <s> ^name wander
              ^operator <op1> +
                        <op2> +)
   (<op1> ^name choose-next-waypoint)
   (<op2> ^name choose-next-waypoint)
-->
   (<s> ^operator <op1> = <op2>)
}


sp {apply*choose-next-waypoint
   (state <s> ^operator <op>
              ^superoperator <so>)
   (<op> ^name choose-next-waypoint
         ^destination <wn>)
-->
   (<so> ^destination <wn>)
}
