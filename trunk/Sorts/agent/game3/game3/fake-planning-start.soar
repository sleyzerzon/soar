sp {propose*start-build-barracks
   (state <s> ^name sorts
              ^planning.execution-buffer <eb>)
  -{(<eb> ^task <t>)
    (<t> ^name build-barracks
          ^id 1234)}
-->
   (<s> ^operator <o> + > =)
   (<o> ^name start-task
        ^task-name build-barracks
        ^task-id 1234)
}
sp {propose*start-build-barracks2
   (state <s> ^name sorts
              ^comment out
              ^planning.execution-buffer <eb>)
  -{(<eb> ^task <t>)
    (<t> ^name build-barracks
          ^id 12774)}
-->
   (<s> ^operator <o> + > =)
   (<o> ^name start-task
        ^task-name build-barracks
        ^task-id 12774)
}

sp {propose*start-build-workers
   (state <s> ^name sorts
              ^planning.execution-buffer <eb>)
  -{(<eb> ^task <t>)
    (<t> ^name build-workers
          ^id 2525)}
-->
   (<s> ^operator <o> + > =)
   (<o> ^name start-task
        ^task-name build-workers
        ^task-id 2525)
}

sp {propose*start-build-marines
   (state <s> ^name sorts
              ^planning.execution-buffer <eb>)
  -{(<eb> ^task <t>)
    (<t> ^name build-marines
          ^id 2526)}
   (<eb> ^task <t1>)
   (<t1>  ^name build-barracks
         ^completed true)
-->
   (<s> ^operator <o> + > =)
   (<o> ^name start-task
        ^task-name build-marines
        ^task-id 2526)
}

sp {propose*start-marine-attack
   (state <s> ^name sorts
              ^planning.execution-buffer <eb>
              ^top-state.build-units <bu>)
  -{(<eb> ^task <t>)
    (<t> ^name marine-attack
          ^id 4444)}
   (<bu> ^unit-type 1) # marines are being built
-->
   (<s> ^operator <o> + > =)
   (<o> ^name start-task
        ^task-name marine-attack
        ^task-id 4444)
}


sp {propose*start-miner-assignment
   (state <s> ^name sorts
              ^planning.execution-buffer <eb>
              ^top-state <ts>)
  -{(<eb> ^task <t>)
    (<t> ^name miner-assignment
          ^id 5555)}
              # wait until barracks construction, so we don't take all the workers.
   (<ts> ^build-building <bb>)
   (<bb> ^task-id 1234 
         ^started-build true)
-->
   (<s> ^operator <o> + > =)
   (<o> ^name start-task
        ^task-name miner-assignment
        ^task-id 5555)
}

sp {apply*start-task
   (state <s> ^operator <o>
              ^top-state <ts>)
   (<ts> ^planning.execution-buffer <eb>)
   (<o> ^name start-task
        ^task-id <tid>
        ^task-name <tn>)
-->
   (<eb> ^task <t>)
   (<t> ^id <tid>
        ^name <tn>)
}


sp {propose*execute-task
   (state <s> ^name sorts
             -^running-task
              ^planning.execution-buffer <eb>)
   (<eb> ^task <t>)
   (<t> ^name <nm>
        ^id <tid>
       -^completed true)
-->
   (<s> ^operator <o> + =)
   (<o> ^name execute-task
        ^task <t>)
}

sp {apply*execute-task
   (state <s> ^operator <o>
              ^top-state <ts>)
   (<o> ^name execute-task
        ^task <t>)
   (<t> ^name <nm>
        ^id <tid>)
-->
   (<ts> ^running-task <rt>)
   (<rt> ^name <nm>
         ^id <tid>)
}