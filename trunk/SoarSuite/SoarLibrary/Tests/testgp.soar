gp {gp*test1
(state <s> ^operator <o> +
           ^someflag [true false])
(<o> ^name foo
     ^att [val1 1.3 |another val|])
-->
(<s> ^operator <o> = 5)
}

gp {gp*test2
(state <s> ^operator <o> +
           ^someflag [ true false ])
(<o> ^name foo
     ^att [ val1 1.3 |another val| ])
-->
(<s> ^operator <o> = 10)
}

gp {gp*test3
(state <s> ^operator <o> +
           ^someflag [ true false ])
(<o> ^name foo
     ^att [ val1 1.3 |another val[]][[[]]]][| |\|another val\||])
-->
(<s> ^operator <o> = 15)
}

gp {gp*test4
(state <s> ^|att 1||val1| [ |another val||another val2| ])
-->
(<s> ^operator <o> = 20)
}

gp {gp*test5
(state <s> ^[att1 att2] val)
-->
(<s> ^operator <o> = 5)
}

gp {gp*test6
(state <s> ^[att1 att2 <foo>] val)
-->
(<s> ^[att1 att2 <foo>] <foo>)
}

gp {gp*test7
(state <s> ^operator <o> +
           ^someflag [ <var> true false ]
           ^<< [ a1 a2 a3 a4 a5] [a6 a7 a8 a9 a10] >> << [v1 v2 v3] [v4 v5 v6] [v7 v8 v9 v10] >>)
(<o> ^name foo
     ^att [ val1 1.3 |another val| |\|another val\|| ]
     ^[ att1 att2 att3 att4 att5] [val1 val2 val3 val4 <var>])
-->
(<s> ^[<var> att] <var>)
}

# this rule works in that the end result is what we want,
# but Soar's parser generates tons of "error" messages about
# the \'s (which it just ignores, so it works anyway)
# we could update gp to "fix" this, but it seems like an
# abuse we don't want to encourage.  Still, it's pretty cool.
gp {gp*test8
(state <s> ^foo <f1> ^bar <b1>)
[(<f1>\ ^value\ <b1>) (<b1>\ ^value\ <f1>)]
-->
[(<f1>\ ^bar\ <b1>) (<b1>\ ^foo\ <f1>)]
}


### Failure cases ###

#gp {gp*fail1
#(state <s> ^att []) # need at least one value in list
#-->
#(<s> ^operator <o> = 5)
#}

#gp {gp*fail2
#(state <s> ^[att1 att2][val1 val2]) # need space between value lists
#-->
#(<s> ^operator <o> = 5)
#}

#gp {gp*fail3
#(state <s> ^foo bar[) # unmatched [
#-->
#(<s> ^foo bar)}