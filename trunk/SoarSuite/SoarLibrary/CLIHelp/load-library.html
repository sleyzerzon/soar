<html dir="ltr" lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><title>Load-library - Soar Wiki</title></head><body class="mediawiki ns-0 ltr page-Load-library"><div id="globalWrapper"><div id="column-content"><div id="content"><a id="top" name="top"></a><h1 class="firstHeading">Load-library</h1><div id="bodyContent"><div id="contentSub"></div><div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div><a name="Name"></a><h1><span class="mw-headline"> Name </span></h1><p><b>load-library</b> - Load a shared library into the local client (for the purpose of, e.g., providing custom event handling). <a name="Synopsis"></a><h1><span class="mw-headline"> Synopsis </span></h1><pre>load-library [<u>library_name</u>] [<u>arguments</u>]
</pre> <a name="Options"></a><h1><span class="mw-headline"> Options </span></h1><table border=1 cellpadding=2><tr><td> library_name </td><td> The root name of the library (without the .dll or .so extension; this is added for you depending on your platform). </td></tr><tr><td> arguments </td><td> Whatever arguments the library&#39;s initialization function is expecting, if any. </td></tr></table><a name="Description"></a><h1><span class="mw-headline"> Description </span></h1><p>Sometimes, a user will want to extend an existing environment. For example, the person may want to provide custom RHS functions, or register for print events for the purpose of logging trace information. If modifying the existing environment is cumbersome or impossible, then the user has two options: create a remote client that provides the functionality, or use load-library. Load-library creates extensions in the local client, making it orders of magnitude faster than a remote client. <p>To create a loadable library, the library must contain the following function: <pre>#ifdef __cplusplus
extern &quot;C&quot; {
#endif

EXPORT char* sml_InitLibrary(Kernel* pKernel, int argc, char** argv) {	
  // Your code here
}

#ifdef __cplusplus
} // extern &quot;C&quot;
#endif
</pre><p>This function is called when load-library loads your library. It is responsible for any initialization that you want to take place (e.g. registering custom RHS functions, registering for events, etc). <p>The argc and argv arguments are intended to mirror the arguments that a standard SML client would get. Thus, the first argument is the name of the library, and the rest are whatever other arguments are provided. This is to make it easy to use the same codebase to create a loadable library or a standard remote SML client (e.g. when run as a standard client, just pass the arguments main gets into sml_InitLibrary). <p>The return value of sml_InitLibrary is for any error messages you want to return to the load-library call. If no error occurs, return a zero-length string. <p>An example library is provided in the Tools/TestExternalLibraryLib project. This example can also be compiled as a standard remote SML client. The Tools/TestExternalLibraryExe project tests loading the TestExternalLibraryLib library. <a name="Examples"></a><h1><span class="mw-headline"> Examples </span></h1><p>To load TestExternalLibraryLib: <pre>load-library TestExternalLibraryLib
</pre><p>To load a library that takes arguments (say, a logger): <pre>load-library my-logger -filename mylog.log
</pre><div class="visualClear"></div></div></div></div><div class="visualClear"></div></div></body></html>
