#summary wma command documentation

= wma =

Control the behavior of working memory activation.

== Synopsis ==

{{{
wma
wma -g|--get <parameter>
wma -s|--set <parameter> <value>
}}}

== Options ==

|| `-g, --get` || Print current parameter setting ||
|| `-s, --set` || Set parameter value ||

== Description ==

The `wma` command changes the behavior of and displays information about working memory activation.
To get the activation of individual WMEs, use `print -i`.

=== Parameters ===

The `wma` command uses the `--get|--set <parameter> <value>` convention rather than individual switches for each parameter.
Running `smem` without any switches displays a summary of the parameter settings.

|| *Parameter* || *Description* || *Possible values* || *Default* ||
|| `activation` || Enable working memory activation || `on`, `off` || `off` ||
|| `decay-rate` || WME decay factor || `[`0, 1`]` || 0.5 ||
|| `decay-thresh` || Forgetting threshold || `(`0, inf`)` || 2.0 ||
|| `petrov-approx` || Enables the (Petrov 2006) long-tail approximation || `on`, `off` || `off` ||
|| `forgetting` || Enable removal of WMEs with low activation values || `on`, `off` || `off` ||
|| `forget-wme` || If `lti` only remove WMEs with a long-term id || `all`, `lti` || `all` ||

The `decay-rate` and `decay-thresh` parameters are entered as positive decimals, but are internally converted to, and printed out as, negative.

The `petrov-approx` may provide additional validity to the activation value, but comes at a significant computational cost, as the model includes unbounded positive exponential computations, which cannot be reasonably cached.

When `activation` is enabled, the system produces a cache of results of calls to the `exp` function, as these can be expensive during runtime. The size of the cache is based upon two run-time parameters (`decay-rate` and `decay-thresh`), and one compile time parameter, `WMA_REFERENCES_PER_DECISION` (default value of 10), which estimates the maximum number of times a WME will be referenced during a decision. The cache is composed of `double` variables (i.e. 64-bits, currently) and the number of cache items is computed as follows:

,,e,,^(thresh - ln(max_refs)) / decay_rate^

With the current default parameter values, this will incur 42.65KB of memory. Holding the `decay-rate` constant, reasonable changes to `decay-thresh` (i.e. +/- 5) does not greatly change this value. However, small changes to `decay-rate` will dramatically change this profile. For instance, keeping everything else constant, a `decay-thresh` of 0.3 requires 12.9MB and 0.2 requires 16.4GB.

If `forget-wme` is `lti` and `forgetting` is `on`, only those WMEs whose id is a long-term identifier *at the decision of forgetting* will be removed from working memory. If, for instance, the id is stored to semantic memory after the decision of forgetting, the WME will not be removed till some time after the next WME reference (such as testing/creation by a rule).

== See Also ==

[cmd_print print]