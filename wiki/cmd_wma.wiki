#summary wma command documentation

= wma =

Control the behavior of working memory activation.

== Synopsis ==

{{{
wma
wma -g|--get <parameter>
wma -s|--set <parameter> <value>
wma -S|--stats [<statistic>]
wma -t|--timers [<timer>]
wma -h|--history <timetag>
}}}

== Options ==

|| `-g, --get` || Print current parameter setting ||
|| `-s, --set` || Set parameter value ||
|| `-S, --stats` || Print statistic summary or specific statistic ||
|| `-t, --timers` || Print timer summary or specific timer ||
|| `-h, --history` || Print reference history of a WME ||

== Description ==

The `wma` command changes the behavior of and displays information about working memory activation.

To get the activation of individual WMEs, use `print -i`.
To get the reference history of an individual WME, use `wma -h|--history `<`timetag`>. For example:

{{{
print --internal s1
(4000016: S1 ^ct 1000000 [3.6])
(4: S1 ^epmem E1 [1])
(11: S1 ^io I1 [1])
(20: S1 ^max 1000000 [3.4])
(18: S1 ^name ct [3.4])
(4000018: S1 ^operator O1000001 [1] +)
(4000019: S1 ^operator O1000001 [1])
(3: S1 ^reward-link R1 [1])
(8: S1 ^smem S2 [1])
(2: S1 ^superstate nil [1])
(14: S1 ^top-state S1 [1])
(1: S1 ^type state [1])
}}}

The bracketed values are activation. To get the history of an individual element:

{{{
wma --history 18
history (60/5999999, first @ d1):
 6 @ d1000000 (-1)
 6 @ d999999 (-2)
 6 @ d999998 (-3)
 6 @ d999997 (-4)
 6 @ d999996 (-5)
 6 @ d999995 (-6)
 6 @ d999994 (-7)
 6 @ d999993 (-8)
 6 @ d999992 (-9)
 6 @ d999991 (-10)
}}}

This shows the last 60 references (of 5999999 in total, where the first occurred at decision cycle 1). For each reference, it says how many references occurred in the cycle (such as 6 at decision 1000000, which was one cycle ago at the time of executing this command). Note that references during the current cycle will not be reflected in this command (or computed activation value) until the end of output phase.

=== Parameters ===

The `wma` command uses the `--get|--set <parameter> <value>` convention rather than individual switches for each parameter.
Running `wma` without any switches displays a summary of the parameter settings.

|| *Parameter* || *Description* || *Possible values* || *Default* ||
|| `activation` || Enable working memory activation || `on`, `off` || `off` ||
|| `decay-rate` || WME decay factor || `[`0, 1`]` || 0.5 ||
|| `decay-thresh` || Forgetting threshold || `(`0, inf`)` || 2.0 ||
|| `petrov-approx` || Enables the (Petrov 2006) long-tail approximation || `on`, `off` || `off` ||
|| `forgetting` || Enable removal of WMEs with low activation values || `on`, `off` || `off` ||
|| `forget-wme` || If `lti` only remove WMEs with a long-term id || `all`, `lti` || `all` ||

The `decay-rate` and `decay-thresh` parameters are entered as positive decimals, but are internally converted to, and printed out as, negative.

The `petrov-approx` may provide additional validity to the activation value, but comes at a significant computational cost, as the model includes unbounded positive exponential computations, which cannot be reasonably cached.

When `activation` is enabled, the system produces a cache of results of calls to the `exp` function, as these can be expensive during runtime. The size of the cache is based upon two run-time parameters (`decay-rate` and `decay-thresh`), and one compile time parameter, `WMA_REFERENCES_PER_DECISION` (default value of 10), which estimates the maximum number of times a WME will be referenced during a decision. The cache is composed of `double` variables (i.e. 64-bits, currently) and the number of cache items is computed as follows:

e^((thresh - ln(max_refs)) / decay_rate)

With the current default parameter values, this will incur 42.65KB of memory. Holding the `decay-rate` constant, reasonable changes to `decay-thresh` (i.e. +/- 5) does not greatly change this value. However, small changes to `decay-rate` will dramatically change this profile. For instance, keeping everything else constant, a `decay-thresh` of 0.3 requires 12.9MB and 0.2 requires 16.4GB.

If `forget-wme` is `lti` and `forgetting` is `on`, only those WMEs whose id is a long-term identifier *at the decision of forgetting* will be removed from working memory. If, for instance, the id is stored to semantic memory after the decision of forgetting, the WME will not be removed till some time after the next WME reference (such as testing/creation by a rule).

== See Also ==

[cmd_print print]