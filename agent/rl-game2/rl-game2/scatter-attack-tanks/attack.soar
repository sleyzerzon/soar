sp {scatter-attack-tanks*propose*attack
   (state <s> ^name scatter-attack-tanks
              ^memory <m>
              ^my-pid <mpid>
              ^enemy-pid <epid>
              ^can-use <my-tanks>
              ^io.input-link.groups.group <enemy-tanks>)
   (<my-tanks> ^id <mtid>)
   (<enemy-tanks> ^owner <epid>
                  ^type tank
                  ^id <etid>)
   (<m> ^distance-measure <dm>)
   (<dm> ^my-tank-id <mtid>
         ^enemy-tank-id <etid>
         ^distance <d>)
  -{(<gs> ^group <closer-target>)
    (<closer-target> ^owner <epid>
                     ^type tank
                     ^id <ctid>)
    (<m> ^distance-measure <dm1>)
    (<dm1> ^my-tank-id <mtid>
           ^enemy-tank-id <ctid>
           ^distance < <d>)}
-->
   (<s> ^operator <o> + =)
   (<o> ^name attack
        ^my-tanks-id <mtid>
        ^enemy-tanks-id <etid>)}

sp {scatter-attack-tanks*apply*attack
   (state <s> ^name scatter-attack-tanks
              ^memory <m>
              ^io.output-link.sorts <cmd>
              ^operator <o>)
   (<o> ^name attack
        ^my-tanks-id <mtid>
        ^enemy-tanks-id <etid>)
-->
   (<cmd> ^attack <a>)
   (<a> ^group0 <mtid>
        ^group1 <etid>)
   (<m> ^already-commanded <mtid>)}