#
# if we have a visible entity it has an entry, just link to the input-link version
#
sp {simple-robot*elaborate*visible-entity
   (state <s> ^name simple-robot
              ^entities.entity <es>
              ^io.input-link.entities.entity <e>)
   (<e> ^visible true
        ^id <id>)
   (<es> ^id <id>)
-->
   (<es> ^data <e>)
}

# when to send the next message
sp {simple-robot*elaborate*entity-next-message-time
   (state <s> ^name simple-robot
              ^entities.entity <e>
              ^message-update-time <mut>)
   (<e> ^last-update-message-time <t>)
-->
   (<e> ^next-update-message-time (+ <t> <mut>))
}