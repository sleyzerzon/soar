# compute 3 seconds in the future
# will save this number to mark when the next action should be taken
sp {wander*elaborate*state*future-time
   (state <s> ^name wander
              ^io.input-link.time.seconds <t>
              ^top-state.action-interval-time <ait>)
-->
   (<s> ^future-time (+ <t> <ait>))
}

sp {wander*elaborate*superoperator*next-action-time-init
   :o-support
   (state <s> ^name wander
              ^io.input-link.time.seconds <t>
              ^superoperator <so>
             -^superoperator.next-action-time)
-->
   (<so> ^next-action-time <t>)
}

sp {wander*elaborate*superoperator*next-action-time
   (state <s> ^name wander
              ^operator.name << move rotate stop >>
              ^superoperator <so>
              ^future-time <ft>
              ^superoperator.next-action-time <nat>)
-->
   (<so> ^next-action-time <nat> - <ft>)
}

sp {wander*elaborate*state*next-action-time
   (state <s> ^name wander
              ^superoperator.next-action-time <nat>)
-->
   (<s> ^next-action-time <nat>)
}

