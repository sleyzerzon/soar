# first, what to launch when "start all" is executed
all = [spy, viewer, splinter, simulator, sick, controller];

env {
	command = "env";
}

# next, define each module
spy {
	# what command to run
	command = "lcm-spy";
}

viewer {
	# what command to run
	command = ["java","april.viewer.Viewer"];
	config = config; # seems weird, but is actually saying "use the config subkey for configuration"
	
	# write this config out to file and append its filename to the command
	config { # component-specific config
		viewer {
		    avatar_hubi {
		        path = "sim/meshmodels/hubi.rwx";
		        scale = 7;
		
		        position = [ 0, 0, 0.63 ];
		        rollpitchyaw_degrees = [ 90, 0, 90 ];
		    }
		
		    avatar {
		        path = "sim/meshmodels/cy.rwx";
		        scale = 7;
		        
		        position = [ 0, 0, 0 ];
		        rollpitchyaw_degrees = [ 90, 0, 90 ];
		    }
		}
	}
}

splinter {
	command = ["java","sps.splinter.Splinter"];
	config = config; # seems weird, but is actually saying "use the config subkey for configuration"
	
	config { # component-specific config
		updateHz = 30;
		ports = [0, 1];
		invert = [true, false];
	}
}

simulator {
	command = ["java","april.sim.Simulator"];
	config = config; # seems weird, but is actually saying "use the config subkey for configuration"
	
	config { # component-specific config
		simulator {
		    obstacle_image {
		        path = "sim/intelmapbig.png";
		        meters_per_pixel = 0.01;
		    }
			
		    lasers = [ "LIDAR_FRONT" ];    
		    laser_max_range_m = 30;
		}
		
		# the robot's coordinate frame has the vehicle at the origin, looking
		# down the X axis, with +Y = left and +Z = up.
		LIDAR_FRONT {
		    position = [ 0, 0, 0.5 ];
		    rollpitchyaw_degrees = [ 0, 0, 0 ];
		    color = [1, 0, 0];
		}
	}
}

sick {
	command = ["../../april-code/bin/sick","-c","LIDAR_FRONT"];
}

controller {
	command = ["java","sps.control.Controller"];
	config = config; # seems weird, but is actually saying "use the config subkey for configuration"
	
	config { # component-specific config
		productions = "agents/simple-square.soar";
	}
}

debugger {
	command = ["java","-jar","../../SoarSuite/SoarLibrary/bin/SoarJavaDebugger.jar","-remote"];
}
