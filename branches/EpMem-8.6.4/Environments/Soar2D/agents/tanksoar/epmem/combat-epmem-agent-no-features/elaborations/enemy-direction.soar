##################################
## Compute enemy direction from sound, radar, or incoming
##################################

sp {elaborate*state*sound*direction
   (state <s> ^io.input-link.sound { <> silent <direction> })
-->
   (<s> ^enemy-direction <direction>)}

sp {elaborate*retreat*radar*front
   (state <s> ^io.input-link.radar.tank)
-->
   (<s> ^enemy-direction forward)}

sp {elaborate*retreat*incoming*direction
   (state <s> ^io.input-link.incoming.<dir> yes)
-->
   (<s> ^enemy-direction <dir>)}

sp {elaborate*retreat*radar*direction
   (state <s> ^io.input-link.radar.tank.position { <dir> <> center })
-->
   (<s> ^enemy-direction <dir>
        ^avoid-direction <dir>)
}


