#IF I've recalled the first episode in a combat
#AND I have not recorded a final status
#AND this epmem matches the op to evaluate
#AND the epmem's retrieval has been recorded in last-new-epmem
#THEN retrieve the next episode
sp {evaluate-op*propose*get-next-epmem*first
   (state <s> ^name evaluate-op
             -^recalled-status
              ^epmem-op-match true
              ^epmem <epmem>
              ^last-new-epmem)
   (<epmem> ^query <query>
            ^retrieval-count 1)
-->
   (<query> ^command.name next)
}

#IF I've recalled a subsequent episode in a combat
#AND I have not recorded a final status
#THEN retrieve the next episode
sp {evaluate-op*propose*get-next-epmem*subsequent
   (state <s> ^name evaluate-op
             -^recalled-status
              ^epmem <epmem>)
   (<epmem> ^query <query>
            ^retrieval-count > 1)
-->
   (<query> ^command.name next)
}



