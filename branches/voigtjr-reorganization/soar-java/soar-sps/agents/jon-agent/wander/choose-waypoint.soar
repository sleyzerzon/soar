sp {wander*propose*choose-waypoint
   (state <s> ^name wander
              ^top-state <ts>
              ^at <id>)
   (<ts> ^io.input-link.self.waypoints <wps>)
   (<wps> -^waypoint.target true
           ^waypoint <wp1>)
   (<wp1> ^id <id>
          ^connection <wp2>)
-->
   (<s> ^operator <op> + =)
   (<op> ^name choose-waypoint
         ^waypoint <wp2>)
}

sp {wander*apply*choose-waypoint
   (state <s> ^name wander
              ^operator <op>)
   (<op> ^name choose-waypoint
         ^waypoint <wp>)
-->
   (<wp> ^target true)
}
